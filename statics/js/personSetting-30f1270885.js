function initProvice(e,o){var i="/link/cityCode.do?parentId=0",t="",n="",a="",c="";$.ajax({url:i,dataType:"json",success:function(i){$("#proveName").html("");for(var l=i.data,p=0;p<l.length;p++)t=l[p].name,n=l[p].id,c+="<option value='"+n+"'>"+t+"</option>",t==e&&(a=n);return"-请选择-"==e?(c="<option value=''>-请选择-</option>"+c+"<option value='00000'>海外</option>",$("#proveName").append(c),void $("#cityName").html("<option value=''>-请选择-</option>")):"海外"==e?(c+="<option value='00000'>海外</option>",$("#proveName").append(c),$("#proveName option[value='00000']").attr("selected","selected"),void $("#cityName").html("<option value='海外'>海外</option>")):(c+="<option value='00000'>海外</option>",$("#proveName").append(c),$("#proveName option[value='"+a+"']").attr("selected","selected"),void setcity(a,o))}})}function setcity(e,o){var i="/link/cityCode.do?parentId="+e,t="",n="",a="";return $("#cityName").html(""),""==e?void $("#cityName").html("<option value=''>-请选择-</option>"):"00000"==e?void $("#cityName").html("<option value='海外'>海外</option>"):void $.ajax({url:i,dataType:"json",success:function(e){for(var i=e.data,c=0;c<i.length;c++)t=i[c].name,n=i[c].id,a+="<option value='"+t+"'>"+t+"</option>";$("#cityName").append(a),""!=o&&$("#cityName option[value='"+o+"']").attr("selected","selected")}})}!function(e,o){function i(){e("#person_info_save_btn").click(function(){if(regCheckRule.checkUSerNickRule()||regCheckRule.usersignBlur()){var o=e("#hidJid").val(),i=e("#nick").val(),t=e(":radio:checked").val(),n=e("#hidImgUrl").val(),l=e("#proveName option:selected").text(),r=e("#cityName option:selected").val(),u=e(".info-table").find(".sign").val();"-请选择-"==l&&(l="",r="");var s="/profile/update";c.ajax({url:s,type:"POST",data:a.param({jid:o,nick:i,imgUrl:n,sex:t,proveName:l,cityName:r,sign:u}),success:function(e){return e.code!=p?void c.showTopTips(c.TIPS_TYPE.error,e.message):void c.showTopTips(c.TIPS_TYPE.success,e.message)}})}})}function t(){e("#upload-dialog-btn-close").click(function(){chouti.Head_Pic_Cancel_info()})}function n(o){regCheckRule.initTipsBind(),regCheckRule.userNickBlurTips(),regCheckRule.usersignBlur(),regCheckRule.inputTextFocusorBlur(),chouti.showUploadImgDialog(),t(),chouti.Init(),i(),e("#nick").keydown(function(o){13==o.keyCode&&e("#person_info_save_btn").click()})}var a=e.gozap,c=a.labi,l=c.i18n,p=(l.register,c.RESULT_CODE.success);NS_person_info_setting={init:n}}(jQuery);